<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Tue Jul 12 15:33:26 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>GIT&minus;FOR&minus;EACH&minus;REF</title>

</head>
<body>

<h1 align="center">GIT&minus;FOR&minus;EACH&minus;REF</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#FIELD NAMES">FIELD NAMES</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#GIT">GIT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">git-for-each-ref
&minus; Output information on each ref</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>git
for&minus;each&minus;ref</i>
[&minus;&minus;count=&lt;count&gt;]
[&minus;&minus;shell|&minus;&minus;perl|&minus;&minus;python|&minus;&minus;tcl]
<br>
[(&minus;&minus;sort=&lt;key&gt;)...]
[&minus;&minus;format=&lt;format&gt;]
[&lt;pattern&gt;...]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Iterate over
all refs that match &lt;pattern&gt; and show them according
to the given &lt;format&gt;, after sorting them according to
the given set of &lt;key&gt;. If &lt;count&gt; is given,
stop after showing that many refs. The interpolated values
in &lt;format&gt; can optionally be quoted as string
literals in the specified host language allowing their
direct evaluation in that language.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">&lt;count&gt;</p>

<p style="margin-left:17%;">By default the command shows
all refs that match &lt;pattern&gt;. This option makes it
stop after showing that many refs.</p>


<p style="margin-left:11%; margin-top: 1em">&lt;key&gt;</p>

<p style="margin-left:17%;">A field name to sort on. Prefix
&minus; to sort in descending order of the value. When
unspecified, refname is used. You may use the
&minus;&minus;sort=&lt;key&gt; option multiple times, in
which case the last key becomes the primary key.</p>


<p style="margin-left:11%; margin-top: 1em">&lt;format&gt;</p>

<p style="margin-left:17%;">A string that interpolates
%(fieldname) from the object pointed at by a ref being
shown. If fieldname is prefixed with an asterisk (*) and the
ref points at a tag object, the value for the field in the
object tag refers is used. When unspecified, defaults to
%(objectname) SPC %(objecttype) TAB %(refname). It also
interpolates %% to %, and %xx where xx are hex digits
interpolates to character with hex code xx; for example %00
interpolates to \0 (NUL), %09 to \t (TAB) and %0a to \n
(LF).</p>


<p style="margin-left:11%; margin-top: 1em">&lt;pattern&gt;...</p>

<p style="margin-left:17%;">If one or more patterns are
given, only refs are shown that match against at least one
pattern, either using fnmatch(3) or literally, in the latter
case matching completely or from the beginning up to a
slash.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;shell,
&minus;&minus;perl, &minus;&minus;python,
&minus;&minus;tcl</p>

<p style="margin-left:17%;">If given, strings that
substitute %(fieldname) placeholders are quoted as string
literals suitable for the specified host language. This is
meant to produce a scriptlet that can directly be
&rsquo;eval&rsquo;ed.</p>

<h2>FIELD NAMES
<a name="FIELD NAMES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Various values
from structured fields in referenced objects can be used to
interpolate into the resulting output, or as sort keys.</p>

<p style="margin-left:11%; margin-top: 1em">For all
objects, the following names can be used:</p>

<p style="margin-left:11%; margin-top: 1em">refname</p>

<p style="margin-left:17%;">The name of the ref (the part
after $GIT_DIR/). For a non&minus;ambiguous short name of
the ref append :short. The option core.warnAmbiguousRefs is
used to select the strict abbreviation mode.</p>

<p style="margin-left:11%; margin-top: 1em">objecttype</p>

<p style="margin-left:17%;">The type of the object (blob,
tree, commit, tag).</p>

<p style="margin-left:11%; margin-top: 1em">objectsize</p>

<p style="margin-left:17%;">The size of the object (the
same as <i>git cat&minus;file &minus;s</i> reports).</p>

<p style="margin-left:11%; margin-top: 1em">objectname</p>

<p style="margin-left:17%;">The object name (aka
SHA&minus;1). For a non&minus;ambiguous abbreviation of the
object name append :short.</p>

<p style="margin-left:11%; margin-top: 1em">upstream</p>

<p style="margin-left:17%;">The name of a local ref which
can be considered &ldquo;upstream&rdquo; from the displayed
ref. Respects :short in the same way as refname above.
Additionally respects :track to show &quot;[ahead N, behind
M]&quot; and :trackshort to show the terse version:
&quot;&gt;&quot; (ahead), &quot;&lt;&quot; (behind),
&quot;&lt;&gt;&quot; (ahead and behind), or &quot;=&quot;
(in sync). Has no effect if the ref does not have tracking
information associated with it.</p>

<p style="margin-left:11%; margin-top: 1em">HEAD</p>

<p style="margin-left:17%;"><i>*</i> if HEAD matches
current ref (the checked out branch), ' ' otherwise.</p>

<p style="margin-left:11%; margin-top: 1em">color</p>

<p style="margin-left:17%;">Change output color. Followed
by :&lt;colorname&gt;, where names are described in
color.branch.*.</p>

<p style="margin-left:11%; margin-top: 1em">In addition to
the above, for commit and tag objects, the header field
names (tree, parent, object, type, and tag) can be used to
specify the value in the header field.</p>

<p style="margin-left:11%; margin-top: 1em">Fields that
have name&minus;email&minus;date tuple as its value (author,
committer, and tagger) can be suffixed with name, email, and
date to extract the named component.</p>

<p style="margin-left:11%; margin-top: 1em">The complete
message in a commit and tag object is contents. Its first
line is contents:subject, where subject is the concatenation
of all lines of the commit message up to the first blank
line. The next line is <i>contents:body</i>, where body is
all of the lines after the first blank line. Finally, the
optional GPG signature is contents:signature.</p>

<p style="margin-left:11%; margin-top: 1em">For sorting
purposes, fields with numeric values sort in numeric order
(objectsize, authordate, committerdate, taggerdate). All
other fields are used to sort in their byte&minus;value
order.</p>

<p style="margin-left:11%; margin-top: 1em">In any case, a
field name that refers to a field inapplicable to the object
referred by the ref does not cause an error. It returns an
empty string instead.</p>

<p style="margin-left:11%; margin-top: 1em">As a special
case for the date&minus;type fields, you may specify a
format for the date by adding one of :default, :relative,
:short, :local, :iso8601, :rfc2822 or :raw to the end of the
fieldname; e.g. %(taggerdate:relative).</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">An example
directly producing formatted text. Show the most recent 3
tagged commits:</p>

<p style="margin-left:17%; margin-top: 1em">#!/bin/sh</p>

<p style="margin-left:17%; margin-top: 1em">git
for&minus;each&minus;ref &minus;&minus;count=3
&minus;&minus;sort='&minus;*authordate' \ <br>
&minus;&minus;format='From: %(*authorname) %(*authoremail)
<br>
Subject: %(*subject) <br>
Date: %(*authordate) <br>
Ref: %(*refname)</p>

<p style="margin-left:17%; margin-top: 1em">%(*body) <br>
' 'refs/tags'</p>

<p style="margin-left:11%; margin-top: 1em">A simple
example showing the use of shell eval on the output,
demonstrating the use of &minus;&minus;shell. List the
prefixes of all heads:</p>

<p style="margin-left:17%; margin-top: 1em">#!/bin/sh</p>

<p style="margin-left:17%; margin-top: 1em">git
for&minus;each&minus;ref &minus;&minus;shell
&minus;&minus;format=&quot;ref=%(refname)&quot; refs/heads |
\ <br>
while read entry <br>
do <br>
eval &quot;$entry&quot; <br>
echo &rsquo;dirname $ref&rsquo; <br>
done</p>

<p style="margin-left:11%; margin-top: 1em">A bit more
elaborate report on tags, demonstrating that the format may
be an entire script:</p>

<p style="margin-left:17%; margin-top: 1em">#!/bin/sh</p>

<p style="margin-left:17%; margin-top: 1em">fmt=' <br>
r=%(refname) <br>
t=%(*objecttype) <br>
T=${r#refs/tags/}</p>


<p style="margin-left:17%; margin-top: 1em">o=%(*objectname)
<br>
n=%(*authorname) <br>
e=%(*authoremail) <br>
s=%(*subject) <br>
d=%(*authordate) <br>
b=%(*body)</p>

<p style="margin-left:17%; margin-top: 1em">kind=Tag <br>
if test &quot;z$t&quot; = z <br>
then <br>
# could be a lightweight tag <br>
t=%(objecttype) <br>
kind=&quot;Lightweight tag&quot; <br>
o=%(objectname) <br>
n=%(authorname) <br>
e=%(authoremail) <br>
s=%(subject) <br>
d=%(authordate) <br>
b=%(body) <br>
fi <br>
echo &quot;$kind $T points at a $t object $o&quot; <br>
if test &quot;z$t&quot; = zcommit <br>
then <br>
echo &quot;The commit was authored by $n $e <br>
at $d, and titled</p>

<p style="margin-left:17%; margin-top: 1em">$s</p>

<p style="margin-left:17%; margin-top: 1em">Its message
reads as: <br>
&quot; <br>
echo &quot;$b&quot; | sed &minus;e &quot;s/^/ /&quot; <br>
echo <br>
fi <br>
'</p>


<p style="margin-left:17%; margin-top: 1em">eval=&rsquo;git
for&minus;each&minus;ref &minus;&minus;shell
&minus;&minus;format=&quot;$fmt&quot; \ <br>
&minus;&minus;sort='*objecttype' \ <br>
&minus;&minus;sort=&minus;taggerdate \ <br>
refs/tags&rsquo; <br>
eval &quot;$eval&quot;</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>git-show-ref</b>(1)</p>

<h2>GIT
<a name="GIT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Part of the
<b>git</b>(1) suite</p>
<hr>
</body>
</html>
