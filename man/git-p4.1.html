<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Tue Jul 12 15:33:28 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>GIT&minus;P4</title>

</head>
<body>

<h1 align="center">GIT&minus;P4</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#COMMANDS">COMMANDS</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#DEPOT PATH SYNTAX">DEPOT PATH SYNTAX</a><br>
<a href="#CLIENT SPEC">CLIENT SPEC</a><br>
<a href="#BRANCH DETECTION">BRANCH DETECTION</a><br>
<a href="#PERFORMANCE">PERFORMANCE</a><br>
<a href="#CONFIGURATION VARIABLES">CONFIGURATION VARIABLES</a><br>
<a href="#IMPLEMENTATION DETAILS">IMPLEMENTATION DETAILS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">git-p4 &minus;
Import from and submit to Perforce repositories</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>git p4
clone</i> [&lt;sync options&gt;] [&lt;clone options&gt;]
&lt;p4 depot path&gt;... <i><br>
git p4 sync</i> [&lt;sync options&gt;] [&lt;p4 depot
path&gt;...] <i><br>
git p4 rebase <br>
git p4 submit</i> [&lt;submit options&gt;] [&lt;master
branch name&gt;]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This command
provides a way to interact with p4 repositories using
Git.</p>

<p style="margin-left:11%; margin-top: 1em">Create a new
Git repository from an existing p4 repository using <i>git
p4 clone</i>, giving it one or more p4 depot paths.
Incorporate new commits from p4 changes with <i>git p4
sync</i>. The <i>sync</i> command is also used to include
new branches from other p4 depot paths. Submit Git changes
back to p4 using <i>git p4 submit</i>. The command <i>git p4
rebase</i> does a sync plus rebases the current branch onto
the updated p4 remote branch.</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:17%; margin-top: 1em">&bull; Clone a
repository:</p>

<p style="margin-left:23%; margin-top: 1em">$ git p4 clone
//depot/path/project</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Do some
work in the newly created Git repository:</p>

<p style="margin-left:23%; margin-top: 1em">$ cd project
<br>
$ vi foo.h <br>
$ git commit &minus;a &minus;m &quot;edited foo.h&quot;</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Update
the Git repository with recent changes from p4, rebasing
your work on top:</p>

<p style="margin-left:23%; margin-top: 1em">$ git p4
rebase</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Submit
your commits back to p4:</p>

<p style="margin-left:23%; margin-top: 1em">$ git p4
submit</p>

<h2>COMMANDS
<a name="COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Clone</b>
<br>
Generally, <i>git p4 clone</i> is used to create a new Git
directory from an existing p4 repository:</p>

<p style="margin-left:17%; margin-top: 1em">$ git p4 clone
//depot/path/project</p>

<p style="margin-left:11%; margin-top: 1em">This:</p>

<p style="margin-left:17%; margin-top: 1em">1. Creates an
empty Git repository in a subdirectory called
<i>project</i>.</p>

<p style="margin-left:17%; margin-top: 1em">2. Imports the
full contents of the head revision from the given p4 depot
path into a single commit in the Git branch
<i>refs/remotes/p4/master</i>.</p>

<p style="margin-left:17%; margin-top: 1em">3. Creates a
local branch, <i>master</i> from this remote and checks it
out.</p>

<p style="margin-left:11%; margin-top: 1em">To reproduce
the entire p4 history in Git, use the <i>@all</i> modifier
on the depot path:</p>

<p style="margin-left:17%; margin-top: 1em">$ git p4 clone
//depot/path/project@all</p>

<p style="margin-left:11%; margin-top: 1em"><b>Sync</b>
<br>
As development continues in the p4 repository, those changes
can be included in the Git repository using:</p>

<p style="margin-left:17%; margin-top: 1em">$ git p4
sync</p>

<p style="margin-left:11%; margin-top: 1em">This command
finds new changes in p4 and imports them as Git commits.</p>

<p style="margin-left:11%; margin-top: 1em">P4 repositories
can be added to an existing Git repository using <i>git p4
sync</i> too:</p>

<p style="margin-left:17%; margin-top: 1em">$ mkdir
repo&minus;git <br>
$ cd repo&minus;git <br>
$ git init <br>
$ git p4 sync //path/in/your/perforce/depot</p>

<p style="margin-left:11%; margin-top: 1em">This imports
the specified depot into <i>refs/remotes/p4/master</i> in an
existing Git repository. The <i>&minus;&minus;branch</i>
option can be used to specify a different branch to be used
for the p4 content.</p>

<p style="margin-left:11%; margin-top: 1em">If a Git
repository includes branches <i>refs/remotes/origin/p4</i>,
these will be fetched and consulted first during a <i>git p4
sync</i>. Since importing directly from p4 is considerably
slower than pulling changes from a Git remote, this can be
useful in a multi&minus;developer environment.</p>

<p style="margin-left:11%; margin-top: 1em">If there are
multiple branches, doing <i>git p4 sync</i> will
automatically use the &quot;BRANCH DETECTION&quot; algorithm
to try to partition new changes into the right branch. This
can be overridden with the <i>&minus;&minus;branch</i>
option to specify just a single branch to update.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Rebase</b>
<br>
A common working pattern is to fetch the latest changes from
the p4 depot and merge them with local uncommitted changes.
Often, the p4 repository is the ultimate location for all
code, thus a rebase workflow makes sense. This command does
<i>git p4 sync</i> followed by <i>git rebase</i> to move
local commits on top of updated p4 changes.</p>

<p style="margin-left:17%; margin-top: 1em">$ git p4
rebase</p>

<p style="margin-left:11%; margin-top: 1em"><b>Submit</b>
<br>
Submitting changes from a Git repository back to the p4
repository requires a separate p4 client workspace. This
should be specified using the <i>P4CLIENT</i> environment
variable or the Git configuration variable
<i>git&minus;p4.client</i>. The p4 client must exist, but
the client root will be created and populated if it does not
already exist.</p>

<p style="margin-left:11%; margin-top: 1em">To submit all
changes that are in the current Git branch but not in the
<i>p4/master</i> branch, use:</p>

<p style="margin-left:17%; margin-top: 1em">$ git p4
submit</p>

<p style="margin-left:11%; margin-top: 1em">To specify a
branch other than the current one, use:</p>

<p style="margin-left:17%; margin-top: 1em">$ git p4 submit
topicbranch</p>

<p style="margin-left:11%; margin-top: 1em">The upstream
reference is generally <i>refs/remotes/p4/master</i>, but
can be overridden using the <i>&minus;&minus;origin=</i>
command&minus;line option.</p>

<p style="margin-left:11%; margin-top: 1em">The p4 changes
will be created as the user invoking <i>git p4 submit</i>.
The <i>&minus;&minus;preserve&minus;user</i> option will
cause ownership to be modified according to the author of
the Git commit. This option requires admin privileges in p4,
which can be granted using <i>p4 protect</i>.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>General
options</b> <br>
All commands except clone accept these options.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;git&minus;dir
&lt;dir&gt;</p>

<p style="margin-left:17%;">Set the <i>GIT_DIR</i>
environment variable. See <b>git</b>(1).</p>

<p style="margin-left:11%; margin-top: 1em">&minus;v,
&minus;&minus;verbose</p>

<p style="margin-left:17%;">Provide more progress
information.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Sync
options</b> <br>
These options can be used in the initial <i>clone</i> as
well as in subsequent <i>sync</i> operations.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;branch
&lt;ref&gt;</p>

<p style="margin-left:17%;">Import changes into &lt;ref&gt;
instead of refs/remotes/p4/master. If &lt;ref&gt; starts
with refs/, it is used as is. Otherwise, if it does not
start with p4/, that prefix is added.</p>

<p style="margin-left:17%; margin-top: 1em">By default a
&lt;ref&gt; not starting with refs/ is treated as the name
of a remote&minus;tracking branch (under refs/remotes/).
This behavior can be modified using the
&minus;&minus;import&minus;local option.</p>

<p style="margin-left:17%; margin-top: 1em">The default
&lt;ref&gt; is &quot;master&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">This example
imports a new remote &quot;p4/proj2&quot; into an existing
Git repository:</p>

<p style="margin-left:23%; margin-top: 1em">$ git init <br>
$ git p4 sync &minus;&minus;branch=refs/remotes/p4/proj2
//depot/proj2</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;detect&minus;branches</p>

<p style="margin-left:17%;">Use the branch detection
algorithm to find new paths in p4. It is documented below in
&quot;BRANCH DETECTION&quot;.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;changesfile
&lt;file&gt;</p>

<p style="margin-left:17%;">Import exactly the p4 change
numbers listed in <i>file</i>, one per line. Normally,
<i>git p4</i> inspects the current p4 repository state and
detects the changes it should import.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;silent</p>

<p style="margin-left:17%;">Do not print any progress
information.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;detect&minus;labels</p>

<p style="margin-left:17%;">Query p4 for labels associated
with the depot paths, and add them as tags in Git. Limited
usefulness as only imports labels associated with new
changelists. Deprecated.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;import&minus;labels</p>

<p style="margin-left:17%;">Import labels from p4 into
Git.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;import&minus;local</p>

<p style="margin-left:17%;">By default, p4 branches are
stored in <i>refs/remotes/p4/</i>, where they will be
treated as remote&minus;tracking branches by
<b>git-branch</b>(1) and other commands. This option instead
puts p4 branches in <i>refs/heads/p4/</i>. Note that future
sync operations must specify
<i>&minus;&minus;import&minus;local</i> as well so that they
can find the p4 branches in refs/heads.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;max&minus;changes
&lt;n&gt;</p>

<p style="margin-left:17%;">Limit the number of imported
changes to <i>n</i>. Useful to limit the amount of history
when using the <i>@all</i> p4 revision specifier.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;keep&minus;path</p>

<p style="margin-left:17%;">The mapping of file names from
the p4 depot path to Git, by default, involves removing the
entire depot path. With this option, the full p4 depot path
is retained in Git. For example, path
<i>//depot/main/foo/bar.c</i>, when imported from
<i>//depot/main/</i>, becomes <i>foo/bar.c</i>. With
<i>&minus;&minus;keep&minus;path</i>, the Git path is
instead <i>depot/main/foo/bar.c</i>.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;use&minus;client&minus;spec</p>

<p style="margin-left:17%;">Use a client spec to find the
list of interesting files in p4. See the &quot;CLIENT
SPEC&quot; section below.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Clone
options</b> <br>
These options can be used in an initial <i>clone</i>, along
with the <i>sync</i> options described above.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;destination
&lt;directory&gt;</p>

<p style="margin-left:17%;">Where to create the Git
repository. If not provided, the last component in the p4
depot path is used to create a new directory.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;bare</p>

<p style="margin-left:17%;">Perform a bare clone. See
<b>git-clone</b>(1).</p>

<p style="margin-left:11%; margin-top: 1em">&minus;/
&lt;path&gt;</p>

<p style="margin-left:17%;">Exclude selected depot paths
when cloning.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Submit
options</b> <br>
These options can be used to modify <i>git p4 submit</i>
behavior.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;origin
&lt;commit&gt;</p>

<p style="margin-left:17%;">Upstream location from which
commits are identified to submit to p4. By default, this is
the most recent p4 commit reachable from <i>HEAD</i>.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;M</p>

<p style="margin-left:17%;">Detect renames. See
<b>git-diff</b>(1). Renames will be represented in p4 using
explicit <i>move</i> operations. There is no corresponding
option to detect copies, but there are variables for both
moves and copies.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;preserve&minus;user</p>

<p style="margin-left:17%;">Re&minus;author p4 changes
before submitting to p4. This option requires p4 admin
privileges.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;export&minus;labels</p>

<p style="margin-left:17%;">Export tags from Git as p4
labels. Tags found in Git are applied to the perforce
working directory.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;n,
&minus;&minus;dry&minus;run</p>

<p style="margin-left:17%;">Show just what commits would be
submitted to p4; do not change state in Git or p4.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;prepare&minus;p4&minus;only</p>

<p style="margin-left:17%;">Apply a commit to the p4
workspace, opening, adding and deleting files in p4 as for a
normal submit operation. Do not issue the final &quot;p4
submit&quot;, but instead print a message about how to
submit manually or revert. This option always stops after
the first (oldest) commit. Git tags are not exported to
p4.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;conflict=(ask|skip|quit)</p>

<p style="margin-left:17%;">Conflicts can occur when
applying a commit to p4. When this happens, the default
behavior (&quot;ask&quot;) is to prompt whether to skip this
commit and continue, or quit. This option can be used to
bypass the prompt, causing conflicting commits to be
automatically skipped, or to quit trying to apply commits,
without prompting.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;branch
&lt;branch&gt;</p>

<p style="margin-left:17%;">After submitting, sync this
named branch instead of the default p4/master. See the
&quot;Sync options&quot; section above for more
information.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Rebase
options</b> <br>
These options can be used to modify <i>git p4 rebase</i>
behavior.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;import&minus;labels</p>

<p style="margin-left:17%;">Import p4 labels.</p>

<h2>DEPOT PATH SYNTAX
<a name="DEPOT PATH SYNTAX"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The p4 depot
path argument to <i>git p4 sync</i> and <i>git p4 clone</i>
can be one or more space&minus;separated p4 depot paths,
with an optional p4 revision specifier on the end:</p>


<p style="margin-left:11%; margin-top: 1em">&quot;//depot/my/project&quot;</p>

<p style="margin-left:17%;">Import one commit with all
files in the <i>#head</i> change under that tree.</p>


<p style="margin-left:11%; margin-top: 1em">&quot;//depot/my/project@all&quot;</p>

<p style="margin-left:17%;">Import one commit for each
change in the history of that depot path.</p>


<p style="margin-left:11%; margin-top: 1em">&quot;//depot/my/project@1,6&quot;</p>

<p style="margin-left:17%;">Import only changes 1 through
6.</p>


<p style="margin-left:11%; margin-top: 1em">&quot;//depot/proj1@all
//depot/proj2@all&quot;</p>

<p style="margin-left:17%;">Import all changes from both
named depot paths into a single repository. Only files below
these directories are included. There is not a subdirectory
in Git for each &quot;proj1&quot; and &quot;proj2&quot;. You
must use the <i>&minus;&minus;destination</i> option when
specifying more than one depot path. The revision specifier
must be specified identically on each depot path. If there
are files in the depot paths with the same name, the path
with the most recently updated version of the file is the
one that appears in Git.</p>

<p style="margin-left:11%; margin-top: 1em">See <i>p4 help
revisions</i> for the full syntax of p4 revision
specifiers.</p>

<h2>CLIENT SPEC
<a name="CLIENT SPEC"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The p4 client
specification is maintained with the <i>p4 client</i>
command and contains among other fields, a View that
specifies how the depot is mapped into the client
repository. The <i>clone</i> and <i>sync</i> commands can
consult the client spec when given the
<i>&minus;&minus;use&minus;client&minus;spec</i> option or
when the useClientSpec variable is true. After <i>git p4
clone</i>, the useClientSpec variable is automatically set
in the repository configuration file. This allows future
<i>git p4 submit</i> commands to work properly; the submit
command looks only at the variable and does not have a
command&minus;line option.</p>

<p style="margin-left:11%; margin-top: 1em">The full syntax
for a p4 view is documented in <i>p4 help views</i>. <i>git
p4</i> knows only a subset of the view syntax. It
understands multi&minus;line mappings, overlays with
<i>+</i>, exclusions with <i>&minus;</i> and
double&minus;quotes around whitespace. Of the possible
wildcards, <i>git p4</i> only handles <i>...</i>, and only
when it is at the end of the path. <i>git p4</i> will
complain if it encounters an unhandled wildcard.</p>

<p style="margin-left:11%; margin-top: 1em">Bugs in the
implementation of overlap mappings exist. If multiple depot
paths map through overlays to the same location in the
repository, <i>git p4</i> can choose the wrong one. This is
hard to solve without dedicating a client spec just for
<i>git p4</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The name of the
client can be given to <i>git p4</i> in multiple ways. The
variable <i>git&minus;p4.client</i> takes precedence if it
exists. Otherwise, normal p4 mechanisms of determining the
client are used: environment variable P4CLIENT, a file
referenced by P4CONFIG, or the local host name.</p>

<h2>BRANCH DETECTION
<a name="BRANCH DETECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">P4 does not
have the same concept of a branch as Git. Instead, p4
organizes its content as a directory tree, where by
convention different logical branches are in different
locations in the tree. The <i>p4 branch</i> command is used
to maintain mappings between different areas in the tree,
and indicate related content. <i>git p4</i> can use these
mappings to determine branch relationships.</p>

<p style="margin-left:11%; margin-top: 1em">If you have a
repository where all the branches of interest exist as
subdirectories of a single depot path, you can use
<i>&minus;&minus;detect&minus;branches</i> when cloning or
syncing to have <i>git p4</i> automatically find
subdirectories in p4, and to generate these as branches in
Git.</p>

<p style="margin-left:11%; margin-top: 1em">For example, if
the P4 repository structure is:</p>


<p style="margin-left:17%; margin-top: 1em">//depot/main/...
<br>
//depot/branch1/...</p>

<p style="margin-left:11%; margin-top: 1em">And &quot;p4
branch &minus;o branch1&quot; shows a View line that looks
like:</p>


<p style="margin-left:17%; margin-top: 1em">//depot/main/...
//depot/branch1/...</p>

<p style="margin-left:11%; margin-top: 1em">Then this
<i>git p4 clone</i> command:</p>

<p style="margin-left:17%; margin-top: 1em">git p4 clone
&minus;&minus;detect&minus;branches //depot@all</p>

<p style="margin-left:11%; margin-top: 1em">produces a
separate branch in <i>refs/remotes/p4/</i> for //depot/main,
called <i>master</i>, and one for //depot/branch1 called
<i>depot/branch1</i>.</p>

<p style="margin-left:11%; margin-top: 1em">However, it is
not necessary to create branches in p4 to be able to use
them like branches. Because it is difficult to infer branch
relationships automatically, a Git configuration setting
<i>git&minus;p4.branchList</i> can be used to explicitly
identify branch relationships. It is a list of
&quot;source:destination&quot; pairs, like a simple p4
branch specification, where the &quot;source&quot; and
&quot;destination&quot; are the path elements in the p4
repository. The example above relied on the presence of the
p4 branch. Without p4 branches, the same result will occur
with:</p>

<p style="margin-left:17%; margin-top: 1em">git init depot
<br>
cd depot <br>
git config git&minus;p4.branchList main:branch1 <br>
git p4 clone &minus;&minus;detect&minus;branches //depot@all
.</p>

<h2>PERFORMANCE
<a name="PERFORMANCE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
fast&minus;import mechanism used by <i>git p4</i> creates
one pack file for each invocation of <i>git p4 sync</i>.
Normally, Git garbage compression (<b>git-gc</b>(1))
automatically compresses these to fewer pack files, but
explicit invocation of <i>git repack &minus;adf</i> may
improve performance.</p>

<h2>CONFIGURATION VARIABLES
<a name="CONFIGURATION VARIABLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
config settings can be used to modify <i>git p4</i>
behavior. They all are in the <i>git&minus;p4</i>
section.</p>

<p style="margin-left:11%; margin-top: 1em"><b>General
variables</b> <br>
git&minus;p4.user</p>

<p style="margin-left:17%;">User specified as an option to
all p4 commands, with <i>&minus;u &lt;user&gt;</i>. The
environment variable <i>P4USER</i> can be used instead.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.password</p>

<p style="margin-left:17%;">Password specified as an option
to all p4 commands, with <i>&minus;P &lt;password&gt;</i>.
The environment variable <i>P4PASS</i> can be used
instead.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.port</p>

<p style="margin-left:17%;">Port specified as an option to
all p4 commands, with <i>&minus;p &lt;port&gt;</i>. The
environment variable <i>P4PORT</i> can be used instead.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.host</p>

<p style="margin-left:17%;">Host specified as an option to
all p4 commands, with <i>&minus;h &lt;host&gt;</i>. The
environment variable <i>P4HOST</i> can be used instead.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.client</p>

<p style="margin-left:17%;">Client specified as an option
to all p4 commands, with <i>&minus;c &lt;client&gt;</i>,
including the client spec.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Clone and
sync variables</b> <br>
git&minus;p4.syncFromOrigin</p>

<p style="margin-left:17%;">Because importing commits from
other Git repositories is much faster than importing them
from p4, a mechanism exists to find p4 changes first in Git
remotes. If branches exist under
<i>refs/remote/origin/p4</i>, those will be fetched and used
when syncing from p4. This variable can be set to
<i>false</i> to disable this behavior.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.branchUser</p>

<p style="margin-left:17%;">One phase in branch detection
involves looking at p4 branches to find new ones to import.
By default, all branches are inspected. This option limits
the search to just those owned by the single user named in
the variable.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.branchList</p>

<p style="margin-left:17%;">List of branches to be imported
when branch detection is enabled. Each entry should be a
pair of branch names separated by a colon (:). This example
declares that both branchA and branchB were created from
main:</p>

<p style="margin-left:23%; margin-top: 1em">git config
git&minus;p4.branchList main:branchA <br>
git config &minus;&minus;add git&minus;p4.branchList
main:branchB</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.ignoredP4Labels</p>

<p style="margin-left:17%;">List of p4 labels to ignore.
This is built automatically as unimportable labels are
discovered.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.importLabels</p>

<p style="margin-left:17%;">Import p4 labels into git, as
per &minus;&minus;import&minus;labels.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.labelImportRegexp</p>

<p style="margin-left:17%;">Only p4 labels matching this
regular expression will be imported. The default value is
<i>[a&minus;zA&minus;Z0&minus;9_\&minus;.]+$</i>.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.useClientSpec</p>

<p style="margin-left:17%;">Specify that the p4 client spec
should be used to identify p4 depot paths of interest. This
is equivalent to specifying the option
<i>&minus;&minus;use&minus;client&minus;spec</i>. See the
&quot;CLIENT SPEC&quot; section above. This variable is a
boolean, not the name of a p4 client.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Submit
variables</b> <br>
git&minus;p4.detectRenames</p>

<p style="margin-left:17%;">Detect renames. See
<b>git-diff</b>(1). This can be true, false, or a score as
expected by <i>git diff &minus;M</i>.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.detectCopies</p>

<p style="margin-left:17%;">Detect copies. See
<b>git-diff</b>(1). This can be true, false, or a score as
expected by <i>git diff &minus;C</i>.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.detectCopiesHarder</p>

<p style="margin-left:17%;">Detect copies harder. See
<b>git-diff</b>(1). A boolean.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.preserveUser</p>

<p style="margin-left:17%;">On submit, re&minus;author
changes to reflect the Git author, regardless of who invokes
<i>git p4 submit</i>.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.allowMissingP4Users</p>

<p style="margin-left:17%;">When <i>preserveUser</i> is
true, <i>git p4</i> normally dies if it cannot find an
author in the p4 user map. This setting submits the change
regardless.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.skipSubmitEdit</p>

<p style="margin-left:17%;">The submit process invokes the
editor before each p4 change is submitted. If this setting
is true, though, the editing step is skipped.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.skipSubmitEditCheck</p>

<p style="margin-left:17%;">After editing the p4 change
message, <i>git p4</i> makes sure that the description
really was changed by looking at the file modification time.
This option disables that test.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.allowSubmit</p>

<p style="margin-left:17%;">By default, any branch can be
used as the source for a <i>git p4 submit</i> operation.
This configuration variable, if set, permits only the named
branches to be used as submit sources. Branch names must be
the short names (no &quot;refs/heads/&quot;), and should be
separated by commas (&quot;,&quot;), with no spaces.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.skipUserNameCheck</p>

<p style="margin-left:17%;">If the user running <i>git p4
submit</i> does not exist in the p4 user map, <i>git p4</i>
exits. This option can be used to force submission
regardless.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.attemptRCSCleanup</p>

<p style="margin-left:17%;">If enabled, <i>git p4
submit</i> will attempt to cleanup RCS keywords ($Header$,
etc). These would otherwise cause merge conflicts and
prevent the submit going ahead. This option should be
considered experimental at present.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.exportLabels</p>

<p style="margin-left:17%;">Export Git tags to p4 labels,
as per &minus;&minus;export&minus;labels.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.labelExportRegexp</p>

<p style="margin-left:17%;">Only p4 labels matching this
regular expression will be exported. The default value is
<i>[a&minus;zA&minus;Z0&minus;9_\&minus;.]+$</i>.</p>


<p style="margin-left:11%; margin-top: 1em">git&minus;p4.conflict</p>

<p style="margin-left:17%;">Specify submit behavior when a
conflict with p4 is found, as per &minus;&minus;conflict.
The default behavior is <i>ask</i>.</p>

<h2>IMPLEMENTATION DETAILS
<a name="IMPLEMENTATION DETAILS"></a>
</h2>


<p style="margin-left:17%; margin-top: 1em">&bull;
Changesets from p4 are imported using Git
fast&minus;import.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Cloning
or syncing does not require a p4 client; file contents are
collected using <i>p4 print</i>.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Submitting requires a p4 client, which is not in the same
location as the Git repository. Patches are applied, one at
a time, to this p4 client and submitted from there.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Each
commit imported by <i>git p4</i> has a line at the end of
the log message indicating the p4 depot location and change
number. This line is used by later <i>git p4 sync</i>
operations to know which p4 changes are new.</p>
<hr>
</body>
</html>
